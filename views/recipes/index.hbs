<h1>Recipes</h1>
<div class="row">
    {{#each recipes}}
    {{!-- 3 4-column divs --}}
    <div class="col s12 m4">
        <div class="card">
            <div class="card-image">
                {{!-- helper (need triple {} to parse HTML) --}}
                {{!-- user is the user within the current loop, is recipe.user; ../user is the user  out of the loop, the req.user--}}
                {{{editIcon user ../user _id}}}
            </div>
            <div class="card-content center-align">
                <h5>{{title}}</h5>
                {{!-- helper and strip --}}
                {{!-- first pass in recipe.body, and cut to 150, add ..., then remove any html tags --}}
                <p>{{stripTags (truncate body 150)}}</p>
                <br>

                {{!-- Materialize badge --}}
                <div class="chip">
                    {{!-- user profile image --}}
                    <img src="{{user.image}}" alt="">
                    {{!-- ling to all recipes by this user --}}
                    <a href="/recipes/user/{{user._id}}">{{user.displayName}}</a>
                </div>
            </div>
            <div class="card-action center-align">
                {{!-- link to the single recipe page --}}
                <a href="/recipes/{{_id}}" class="btn grey">Read More</a>
            </div>
        </div>
    </div>

    {{!-- else, meaning if no recipe --}}
    {{else}}
    <p>No recipes to display</p>

    {{!-- end of loop --}}
    {{/each}}
</div>